
# 宏定义

宏起到替换作用，在编译阶段完成，一般写法 ：

```cpp
#define PI 3.1415926535
```

如果想使用宏替换多行可以使用`\`字符，***注意***：最后一行不适用`\`，且`\`不能有任何东西包括空格，tab，注释等

```cpp
//maxn是参数！！！！
#define N(maxn)\  
for(int i=0;i<maxn;i++){\  
	cout<<i<<" ";\  
}
```

宏替换时，起定义含参数时文本替换，不会像函数一样自动计算，例如：

```cpp
#define N 2+3
int a = N*2; //2+3*2 = 8 不是 10
#define N(A,B) A*B
int c = N(1+2,3); //1+2*3 = 7 并不是9
```

`#undef` 宏： 取消宏定义，限制宏的作用范围，方便后期维护，不会对整个程序产生影响

```cpp
#define N 10
	int a = N;
#undef N //作用范围到此为止

a = N; //error C2065: “N”: 未声明的标识符
int N = 20; //N 并不是宏，而是定义的变量名
```

`#` 用于将宏参数转为字符串，即加上双引号。

```cpp
#define N(PARAM) #PARAM
N(123) // === "123"
N(abc) // === "abc"

//调用
string str=N(1234567);  
cout<<str[3]<<endl;
```

`##`用于拼接，常用语宏参数与其他内容的拼接

```cpp
#define N(PARAM1,PARAM2) PARAM1##PARAM2

//调用
cout << N(123,456)<<endl;
```

# 内联

内联函数，相当与宏的替换并且同样实在编译期进行，所以在调用函数时程序无需跳转到另一个位置，可以缩短的代码执行时间，代价是会占用更多的内存空间
**==什么函数适合内联函数：==**
- 代码较少，
- 逻辑较为简单，
- 函数调用开销>>函数执行时间
**==什么函数不适合内联函数：==**
- 代码较多，
- 逻辑复杂，
- 即函数调用开销<<函数执行时间，
- 函数被大量的调用
- 函数内出现循环，switch等

```cpp
inline int add(int a,int b){
	return a+b;
}
int c = add(1,2); //替换后：int c = 1+2;
```

***注意事项***：
1. 并非加上`inline`关键字，就一定是内联函数，`inline`只是程序员的建议，编译器有自己的判断，并且编译器不会把递归函数视为内联函数。
2. 类、结构中在的类内部声明并定义的函数默认为内联函数，如果类中只给出声明，在类外定义的函数，那么默认不是内联函数，除非我们手动加上 `inline` 关键字。

```cpp
class CTest{
	void fun1(){} //默认内联
	void fun2(); //声明
};
void CTest::fun2(){} //默认不是内联函数

CTest tst;
tst.fun1(); //内联替换
tst.fun2(); //未替换
void fun1() {
	int a = 10;
}
inline void fun2() {
	int b = 20;
}
int main() {
	fun1();
	fun2();
	return 0;
}
```